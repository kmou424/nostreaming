# ============================================
# 应用程序基础配置
# ============================================
[app]
# 服务器监听地址
# 默认值: "0.0.0.0"
# 非特殊情况不建议修改
host = "0.0.0.0"

# 服务器监听端口
# 默认值: 3000
# 非特殊情况不建议修改
port = 3000

# API 密钥列表（用于客户端认证）
# - 客户端需要在请求头中携带: Authorization: Bearer <密钥>
# - 支持配置多个密钥，客户端使用任意一个即可通过认证
# - 如果此项为空或未配置，所有请求将被拒绝
# 示例: keys = ["sk-XXXXX", "sk-YYYYY"]
# 必填项
keys = ["sk-XXXXX"]

# ============================================
# 高级配置
# ============================================
[advanced]
# 伪流式空数据包发送间隔（单位：毫秒）
# - 当客户端请求流式响应时，服务器会定期发送空数据包以保持连接
# - 建议值: 300-1000 毫秒
#   * 值太小: 会增加服务器负载和网络流量
#   * 值太大: 可能导致客户端超时断开连接
# 默认值: 500
fakeStreamInterval = 500

# 最大重试次数
# - 当请求失败或空响应时，服务器会自动重试请求，最多重试 maxRetries 次
# - 建议值: 1-10
# 默认值: 3
maxRetries = 3

# 是否伪造请求内容
# - 当请求内容为空时，服务器会伪造请求内容，以避免被 AI  moderation 系统检测
# - 建议值: true/false
# 默认值: false
contentSpoof = false

# ============================================
# 日志配置
# ============================================
[logging]
# 日志级别（从详细到简洁）
# - "debug": 最详细，包含所有调试信息（开发时使用）
# - "info": 一般信息，包含请求、响应等关键信息（推荐生产环境）
# - "warn": 仅警告和错误信息
# - "error": 仅错误信息
# 默认值: "info"
level = "info"

# ============================================
# 上游提供商配置
# ============================================
# 可以配置多个提供商，你需要为每个提供商指定一个唯一的别名（如 my-openai、my-openai-2）
# 格式: [providers.<别名>]
# 示例: [providers.my-openai]
# 提供商别名可以自定义，但必须符合 TOML 键名规范（字母、数字、下划线、连字符）

[providers.my-openai]
# 是否启用该提供商
# - true: 启用，该提供商的模型将对外暴露
# - false: 禁用，该提供商的模型将被忽略
# 默认值: true
enabled = false

# 提供商类型
# 目前仅支持: "openai"
# 未来可能支持: "google", "anthropic" 等（大概（（（目移
type = "openai"

# 上游 API 端点地址
# 必填项，使用官方的不修改，使用第三方时必改，记得带上/v1
endpoint = "https://api.openai.com/v1"

# 上游 API 密钥
# - 从上游服务提供商获取的 API 密钥
# - 注意: 这是用于访问上游服务的密钥，与上面的 keys（客户端认证密钥）不同
# 必填项
api_key = "sk-proj-1234567890"

# ============================================
# 模型过滤配置（可选）
# ============================================
# 如果不需要过滤模型，可以删除或注释掉整个 [providers.<别名>.filter] 部分
# 如果不配置过滤，所有从上游获取到的模型都会对外暴露
# 注意别名部分，过滤器规则会应用到该别名对应的提供商上
# 主要用于清理模型列表，只暴露需要的模型

[providers.my-openai.filter]
# 过滤模式
# - "whitelist"（白名单）: 只允许列表中的模型对外暴露，其他模型将被隐藏
# - "blacklist"（黑名单）: 列表中的模型将被隐藏，其他模型正常暴露
# 必填项（如果配置了 filter 部分）
mode = "whitelist"

# 模型名称列表
# - 填写需要过滤的模型名称（与上游返回的模型 ID 完全匹配）
# - 支持配置多个模型
# 示例: models = ["gpt-4o", "gpt-4o-mini", "gpt-3.5-turbo"]
# 必填项（如果配置了 filter 部分）
models = ["gpt-4o", "gpt-4o-mini"]